<app-content>
  <section class="section">
    <div class="row">
      <div class="col-12 col-md-12 col-lg-12">
        <div class="ibox">
          <div class="ibox-title" style="margin-top: 5px;">
            <div>
              <a class="btn btn-outline btn-primary dim pull-right" [routerLink]="['/add-role']" *ngIf="hasAddRolePermission">
                <i class="fa fa-fw fa-plus-square"></i> Add New Role
              </a>
            </div>
            <h4>Application Roles</h4>
          </div>

          <div class="ibox-content" *ngIf="hasRoleReadPermission">
            <p-table [value]="roles" #dt [columns]="cols" [lazy]="true"
                     (onLazyLoad)="loadRoles($event)" [totalRecords]="totalRecords" [paginator]="true"
                     [rowsPerPageOptions]="[10,15,20,25,50,100]" [rows]="10" [showLoader]="true" [sortOrder]="-1" sortField="id"
                     [loading]="loading">
              <ng-template pTemplate="caption">
                <div class="row">
                  <div class="col-lg-8 text-left">
                    <div class="input-group mb-2">
                      <div class="input-group-prepend">
                        <div class="input-group-text"><i class="fa fa-search"></i></div>
                      </div>
                      <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Search by Name. "
                             (input)="dt.filterGlobal($event.target.value, 'contains')">
                    </div>
                  </div>
                </div>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th style="width:10%">SL.No</th>
                  <th style="width:50%">Role Name</th>
                  <th style="width:30%">No. of Users</th>
                  <th style="width:15%" *ngIf="hasEditRolePermission"></th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-role>
                <tr>
                  <td>{{role.id}}</td>
                  <td>{{role.name}}</td>
                  <td>{{role.users.length}}</td>
                  <td *ngIf="hasEditRolePermission">
                    <a class="btn btn-outline btn-info  dim " [routerLink]="['/edit-role', role.id]">
                      <i class="fa fa-edit"></i>
                      Edit
                    </a>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
    </div>
    <p-confirmDialog [style]="{'width': '30vw'}"></p-confirmDialog>
  </section>
</app-content>

